{"version":3,"sources":["app/app.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/KA;AAAA","file":"www\\javascripts\\app.js","sourcesContent":["$(document).foundation();\r\n\r\n$(window).bind(\"load\", function () {\r\n    var footer = $(\"footer\");\r\n    var pos = footer.position();\r\n    var height = $(window).height();\r\n    height = height - pos.top;\r\n    height = height - footer.height();\r\n    if (height > 0) {\r\n        footer.css({\r\n            'margin-top': height + 'px'\r\n        });\r\n    }\r\n});\r\n\r\nvar userLang = (navigator.language=='hu' || navigator.userLanguage=='hu') ? 'hu' : 'en';\r\nuserLang = 'hu';\r\n\r\nvar App = Ember.Application.create();\r\n\r\nApp.Router.map(function() {\r\n    this.route('index', {path: '/'});\r\n    this.resource('lang', {path: '/:lang_code'}, function() {\r\n        this.route('index', { path: '/' });\r\n        this.resource('szobak', { path: '/szobaink' }, function() {\r\n            this.route('vegas');\r\n            this.route('science');\r\n        });\r\n        this.route('arak', { path: '/arak' });\r\n        this.route('foglalas', { path: '/foglalas' });\r\n        this.route('kapcsolat', { path: '/kapcsolat' });\r\n    });\r\n});\r\nApp.Router.reopen({\r\n    location: 'history'\r\n});\r\n\r\nApp.ApplicationView = Ember.View.extend({\r\n    didInsertElement: function() {\r\n        this.$().foundation();\r\n    }\r\n});\r\nApp.ApplicationRoute = Ember.Route.extend({\r\n    actions: {\r\n    }\r\n});\r\n\r\nApp.IndexView = Ember.View.extend({\r\n  didInsertElement: function() {\r\n    this.controller.transitionToRoute('lang.index', userLang);\r\n  }\r\n});\r\n\r\nApp.LangRoute = Ember.Route.extend({\r\n    model: function(params) {\r\n        var self = this;\r\n        return new Ember.RSVP.Promise(function(resolve) {\r\n            $.getScript(\"./i18n-\" + params.lang_code + \".js\", function() {\r\n                resolve({lang: params.lang_code});\r\n            });\r\n        });\r\n    },\r\n});\r\nApp.LangView = Ember.View.extend({\r\n    didInsertElement: function() {\r\n        this.$().foundation();\r\n\r\n        Ember.run.later(this, function() {\r\n            this.controller.send('closeLanguage');\r\n        }, 5000);\r\n    },\r\n});\r\nApp.LangController = Ember.ObjectController.extend({\r\n    actions: {\r\n        closeLanguage: function() {\r\n            $(\"#language\").slideUp(\"slow\");\r\n            $(\"footer .language\").show(\"slow\");\r\n        },\r\n\r\n        changeLanguage: function() {\r\n            new_lang = (this.get('model').lang == 'hu') ? 'en' : 'hu';\r\n            this.transitionToRoute('lang.index', new_lang);\r\n            Ember.run.later(this, function() { location.reload(); }, 200);\r\n        }\r\n    }\r\n});\r\nApp.SzobakView = Ember.View.extend({\r\n  didInsertElement: function() {\r\n    this.$().foundation();\r\n  }\r\n});\r\nApp.LangIndexView = Ember.View.extend({\r\n\r\n});\r\nApp.LangArakView = Ember.View.extend({\r\n    didInsertElement: function() {\r\n        window.fbAsyncInit = function() {\r\n        FB.init({\r\n          appId      : '157334674330086',\r\n          xfbml      : true,\r\n          version    : 'v2.0'\r\n        });\r\n        };\r\n\r\n        (function(d, s, id){\r\n         var js, fjs = d.getElementsByTagName(s)[0];\r\n         if (d.getElementById(id)) {return;}\r\n         js = d.createElement(s); js.id = id;\r\n         js.src = \"//connect.facebook.net/en_US/sdk.js\";\r\n         fjs.parentNode.insertBefore(js, fjs);\r\n        }(document, 'script', 'facebook-jssdk'));\r\n    }\r\n});\r\nApp.LangFoglalasView = Ember.View.extend({\r\n\r\n});\r\n\r\nApp.SzobakVegasView = Ember.View.extend({\r\n  didInsertElement: function() {\r\n    this.$('#vegasModal').foundation('reveal', 'open');\r\n\r\n    var self = this;\r\n    $(document).on('close.fndtn.reveal', '[data-reveal]', function () {\r\n        self.controller.transitionToRoute('szobak');\r\n    });\r\n  }\r\n});\r\nApp.SzobakScienceView = Ember.View.extend({\r\n  didInsertElement: function() {\r\n    this.$('#scienceModal').foundation('reveal', 'open');\r\n\r\n    var self = this;\r\n    $(document).on('close.fndtn.reveal', '[data-reveal]', function () {\r\n        self.controller.transitionToRoute('szobak');\r\n    });\r\n  }\r\n});\r\n\r\n\r\nApp.LangArakController = Ember.Controller.extend({\r\n    sGames: ['Válassz!', 'Vegas', 'Science'],\r\n    sIH: [{nincsvan: 'nincs', igennem: 'nem', bool: 0}, {nincsvan: 'van', igennem: 'igen', bool: 1}],\r\n\r\n    extrasDisabled: function() {\r\n        if(this.get('selectedGame') && this.get('selectedPeople')) return false;\r\n        else return true;\r\n    }.property('selectedGame', 'selectedPeople'),\r\n\r\n    sPeople: function() {\r\n        if(this.get('selectedGame')===undefined) return false;\r\n        if(this.get('selectedGame')==='Vegas') return ['Válassz!', 2, 3, 4, 5, '5+1'];\r\n        if(this.get('selectedGame')==='Science') return ['Válassz!', 2, 3, 4, '4+1'];\r\n    }.property('selectedGame'),\r\n\r\n    totalPrice: function() {\r\n        var totalPrice = 0;\r\n\r\n        if(this.get('selectedVoucher')==false) {\r\n            if(this.get('selectedGame')==='Vegas') totalPrice = 9890;\r\n            if(this.get('selectedGame')==='Science') totalPrice = 8490;\r\n\r\n            if(this.get('selectedDiak')==true) totalPrice = Math.floor(totalPrice * 0.8 / 100, 2)*100-10;\r\n        } else totalPrice = 6690;\r\n\r\n        if(this.get('selectedPeople') == '4+1' || this.get('selectedPeople') == '5+1') {\r\n            totalPrice += 1400;\r\n        }\r\n\r\n        return totalPrice;\r\n    }.property('selectedGame', 'selectedPeople', 'selectedDiak', 'selectedVoucher'),\r\n\r\n    capitaPrice: function() {\r\n        var people = (this.get('selectedPeople')=='4+1' || this.get('selectedPeople')=='5+1') ? eval(this.get('selectedPeople')) : this.get('selectedPeople');\r\n        return Math.ceil(this.get('totalPrice')/people/10, 1)*10;\r\n    }.property('totalPrice')\r\n});"]}